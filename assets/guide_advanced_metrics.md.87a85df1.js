import{_ as s,o as e,c as a,V as n}from"./chunks/framework.7726510e.js";const _=JSON.parse('{"title":"Metrics","description":"","frontmatter":{},"headers":[],"relativePath":"guide/advanced/metrics.md","lastUpdated":1692001131000}'),o={name:"guide/advanced/metrics.md"},t=n(`<h1 id="metrics" tabindex="-1">Metrics <a class="header-anchor" href="#metrics" aria-label="Permalink to &quot;Metrics&quot;">​</a></h1><p>To conveniently and thoroughly monitor the performance of the network, we recommend using <a href="https://prometheus.io/" target="_blank" rel="noreferrer"><code>prometheus</code></a>. Prometheus is a program that can monitor your Iroha peer over a separate socket and provide different kinds of performance metrics.</p><p>This data can help you find performance bottlenecks and optimise your Iroha configuration.</p><h2 id="how-to-use-metrics" tabindex="-1">How to use metrics <a class="header-anchor" href="#how-to-use-metrics" aria-label="Permalink to &quot;How to use metrics&quot;">​</a></h2><p>To use metrics, you need to configure the <code>/metrics</code> endpoint in the <a href="https://github.com/hyperledger/iroha/blob/iroha2-dev/docs/source/references/config.md" target="_blank" rel="noreferrer">Iroha configuration</a>. By default, the endpoint is exposed at <code>127.0.0.1:8180/metrics</code>. If the port is not available, Iroha will still start and work normally, but metrics won&#39;t be accessible.</p><p>After that, use the IP address to access the data from the running Iroha instance. For example:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark-dimmed"><code><span class="line"><span style="color:#F69D50;">$</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">curl</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">http://127.0.0.1:</span><span style="color:#6CB6FF;">8080</span><span style="color:#96D0FF;">/metrics</span></span></code></pre></div><p>This will give you a result like this:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark-dimmed"><code><span class="line"><span style="color:#768390;"># HELP blocks_height Total number of blocks in chain</span></span>
<span class="line"><span style="color:#768390;"># TYPE blocks_height gauge</span></span>
<span class="line"><span style="color:#F69D50;">blocks_height</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">135543</span></span>
<span class="line"><span style="color:#768390;"># HELP peers_number Total number peers to send transactions and request proposals</span></span>
<span class="line"><span style="color:#768390;"># TYPE peers_number gauge</span></span>
<span class="line"><span style="color:#F69D50;">peers_number</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">7</span></span>
<span class="line"><span style="color:#768390;"># HELP number_of_domains Total number of domains in WSV</span></span>
<span class="line"><span style="color:#768390;"># TYPE number_of_domains gauge</span></span>
<span class="line"><span style="color:#F69D50;">number_of_domains</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">14</span></span>
<span class="line"><span style="color:#768390;"># HELP total_number_of_transactions Total number of transactions in blockchain</span></span>
<span class="line"><span style="color:#768390;"># TYPE total_number_of_transactions gauge</span></span>
<span class="line"><span style="color:#F69D50;">total_number_of_transactions</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">216499</span></span>
<span class="line"><span style="color:#768390;"># HELP number_of_signatures_in_last_block Number of signatures in last block</span></span>
<span class="line"><span style="color:#768390;"># TYPE number_of_signatures_in_last_block gauge</span></span>
<span class="line"><span style="color:#F69D50;">number_of_signatures_in_last_block</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">5</span></span></code></pre></div><h2 id="metrics-endpoint" tabindex="-1"><code>/metrics</code> endpoint <a class="header-anchor" href="#metrics-endpoint" aria-label="Permalink to &quot;\`/metrics\` endpoint&quot;">​</a></h2><p>Refer to the <a href="https://github.com/hyperledger/iroha/blob/iroha2-dev/docs/source/references/api_spec.md#metrics" target="_blank" rel="noreferrer">API specification</a>.</p>`,11),r=[t];function l(p,c,i,d,h,u){return e(),a("div",null,r)}const b=s(o,[["render",l]]);export{_ as __pageData,b as default};
